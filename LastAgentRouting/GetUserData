{"modules":[{"id":"cc7f800e-5c27-4d6a-942a-80b3454e2cda","type":"SetQueue","branches":[{"condition":"Success","transition":"91148bad-401e-4e0d-b806-3aa879a9a71b"},{"condition":"Error","transition":"bb40e335-d84b-4836-ad91-ae715561e739"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:553382741890:instance/115a8403-a619-49ee-a556-c27d72399d56/queue/71328c40-2a56-460b-af4d-ce297a031ef4","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":38,"y":160},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:553382741890:instance/115a8403-a619-49ee-a556-c27d72399d56/queue/71328c40-2a56-460b-af4d-ce297a031ef4","text":"BasicQueue"}}},{"id":"86ada2b7-5137-408a-9a00-b53d131e3846","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"bb40e335-d84b-4836-ad91-ae715561e739"},{"condition":"Error","transition":"bb40e335-d84b-4836-ad91-ae715561e739"}],"parameters":[],"metadata":{"position":{"x":1255,"y":274},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"d5b9733f-7ed6-494c-a563-dc4a14fe5062","type":"SetQueue","branches":[{"condition":"Success","transition":"86ada2b7-5137-408a-9a00-b53d131e3846"},{"condition":"Error","transition":"bb40e335-d84b-4836-ad91-ae715561e739"}],"parameters":[{"name":"Agent","value":"LastAgentUserName","namespace":"External","resourceName":null}],"metadata":{"position":{"x":965,"y":66},"useDynamic":true,"queue":"LastAgentUserName"}},{"id":"4ecf01db-e234-47ed-b40b-587755feb04f","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"d5b9733f-7ed6-494c-a563-dc4a14fe5062"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"86ada2b7-5137-408a-9a00-b53d131e3846"},{"condition":"Timeout","transition":"86ada2b7-5137-408a-9a00-b53d131e3846"},{"condition":"NoMatch","transition":"86ada2b7-5137-408a-9a00-b53d131e3846"},{"condition":"Error","transition":"86ada2b7-5137-408a-9a00-b53d131e3846"}],"parameters":[{"name":"Text","value":"Hello.  Welcome Back.  We noticed you recently called and spoke to $.External.LastAgentFirstName.  Press 1 to be put in queue to speak to them again.  Press 2 to speak with someone else or just stay on the line.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":735,"y":19},"conditionMetadata":[{"id":"46240836-1a59-4370-a525-6a835ebb54b3","value":"1"},{"id":"0b7d8258-c511-4528-ab0e-2a46a48569e5","value":"2"}],"useDynamic":false},"target":"Digits"},{"id":"285f9f4c-76ee-4f2f-9c9d-8603f0726ff0","type":"PlayPrompt","branches":[{"condition":"Success","transition":"86ada2b7-5137-408a-9a00-b53d131e3846"}],"parameters":[{"name":"Text","value":"Hello.  Thank you for calling.  Putting you in the queue.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":984,"y":388},"useDynamic":false}},{"id":"dfd7ba1a-ce82-4c75-9873-12c9a47de7e6","type":"CheckStaffing","branches":[{"condition":"True","transition":"d13dbd88-03c0-4d6b-bec4-7465218fc422"},{"condition":"False","transition":"285f9f4c-76ee-4f2f-9c9d-8603f0726ff0"},{"condition":"Error","transition":"285f9f4c-76ee-4f2f-9c9d-8603f0726ff0"}],"parameters":[{"name":"Status","value":"Online"},{"name":"Agent","value":"LastAgentUserName","namespace":"User Defined","resourceName":null}],"metadata":{"position":{"x":263,"y":15},"useDynamic":true,"queue":"LastAgentUserName"}},{"id":"d13dbd88-03c0-4d6b-bec4-7465218fc422","type":"CheckQueueStatus","branches":[{"condition":"CheckQueueTime","conditionType":"LessThan","conditionValue":300000,"transition":"4ecf01db-e234-47ed-b40b-587755feb04f"},{"condition":"NoMatch","transition":"285f9f4c-76ee-4f2f-9c9d-8603f0726ff0"},{"condition":"Error","transition":"285f9f4c-76ee-4f2f-9c9d-8603f0726ff0"}],"parameters":[{"name":"Agent","value":"LastAgentUserName","namespace":"External","resourceName":null}],"metadata":{"position":{"x":517,"y":30},"conditionMetadata":[{"id":"c82b8d53-6fe7-4461-8e84-86b3d452e9d7","attribute":{"name":"Time in Queue","value":"Time in Queue"},"operator":{"name":"Is less than","value":"LessThan","shortDisplay":"<"},"value":"5","time":"min."}],"queue":"LastAgentUserName","useDynamic":true}},{"id":"98316273-d64a-4247-8119-7e642d058fbf","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"KNOWN","transition":"dfd7ba1a-ce82-4c75-9873-12c9a47de7e6"},{"condition":"NoMatch","transition":"285f9f4c-76ee-4f2f-9c9d-8603f0726ff0"}],"parameters":[{"name":"Attribute","value":"CustomerStatus"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":277,"y":446},"conditionMetadata":[{"id":"b7c717c0-6e26-4d13-8f3f-33b258b88527","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"KNOWN"}]}},{"id":"bb40e335-d84b-4836-ad91-ae715561e739","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1262,"y":618}}},{"id":"91148bad-401e-4e0d-b806-3aa879a9a71b","type":"SetContactFlow","branches":[{"condition":"Success","transition":"e607e3d3-1126-4552-9158-11d2d31acede"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:553382741890:instance/115a8403-a619-49ee-a556-c27d72399d56/contact-flow/02ca9529-af84-4df3-af6e-dadcee277e76","resourceName":"acdk-RecordLastAgent"},{"name":"Type","value":"AgentWhisper"}],"metadata":{"position":{"x":37,"y":367},"contactFlow":{"id":"arn:aws:connect:us-east-1:553382741890:instance/115a8403-a619-49ee-a556-c27d72399d56/contact-flow/02ca9529-af84-4df3-af6e-dadcee277e76","text":"acdk-RecordLastAgent","arn":null,"metricDetail":null,"resourceId":null},"customerOrAgent":false}},{"id":"e607e3d3-1126-4552-9158-11d2d31acede","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"98316273-d64a-4247-8119-7e642d058fbf"},{"condition":"Error","transition":"bb40e335-d84b-4836-ad91-ae715561e739"}],"parameters":[{"name":"FunctionArn","value":"GetUserDataLambda","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"CustomerId","value":"$.CustomerEndpoint.Address","namespace":null}],"metadata":{"position":{"x":46,"y":533},"dynamicMetadata":{"CustomerId":false},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"cc7f800e-5c27-4d6a-942a-80b3454e2cda","metadata":{"entryPointPosition":{"x":20,"y":20},"snapToGrid":false,"name":"acdk-GetUserData","description":null,"type":"contactFlow","status":"published","hash":"a7d0339266d01123c00d3ed66f6e3a05f9227542711f486f44248dddf2ba04c0"}}